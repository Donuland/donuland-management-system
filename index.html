<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç© Donuland Management System v3.0</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üç©</text></svg>">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="donut">üç©</div>
            <h1>Donuland Management System v3.0</h1>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p>Inicializuji...</p>
        </div>
    </div>

    <div class="container" id="mainApp" style="display: none;">
        <header>
            <div class="header-content">
                <h1>üç© Donuland Management System v3.0</h1>
                <div class="header-controls">
                    <button class="btn-primary" onclick="loadData()">üîÑ Naƒç√≠st data</button>
                    <div class="status-indicator" id="statusIndicator">
                        <span class="status-dot"></span>
                        <span>Online</span>
                    </div>
                </div>
            </div>
        </header>

        <nav class="sidebar">
            <div class="nav-item active" onclick="showSection('prediction')">
                <span class="nav-icon">ü§ñ</span>
                <span>AI Predikce</span>
            </div>
            <div class="nav-item" onclick="showSection('calendar')">
                <span class="nav-icon">üìÖ</span>
                <span>Kalend√°≈ô akc√≠</span>
            </div>
            <div class="nav-item" onclick="showSection('analytics')">
                <span class="nav-icon">üìä</span>
                <span>Anal√Ωza & Trendy</span>
            </div>
            <div class="nav-item" onclick="showSection('settings')">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span>Nastaven√≠</span>
            </div>
        </nav>

        <main class="main-content">
            <!-- AI Predikce Section -->
            <section id="prediction" class="section active">
                <div class="section-header">
                    <h2>ü§ñ AI Predikce prodeje a rentabilita</h2>
                    <p>Inteligentn√≠ predikce zalo≈æen√° na historick√Ωch datech, poƒças√≠ a typu akce</p>
                </div>

                <div class="prediction-grid">
                    <!-- Event Details -->
                    <div class="card">
                        <h3>üéØ Z√°kladn√≠ informace akce</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="eventType">Typ akce</label>
                                <select id="eventType" onchange="updatePrediction()">
                                    <option value="">Vyberte typ akce</option>
                                    <option value="food festival">Food festival</option>
                                    <option value="veletrh">Veletrh</option>
                                    <option value="koncert">Koncert/Hudebn√≠ festival</option>
                                    <option value="Sportovn√≠ akce (dospƒõl√≠)">Sportovn√≠ akce</option>
                                    <option value="kulturn√≠ akce (rodinn√°)">Kulturn√≠/Rodinn√° akce</option>
                                    <option value="rodinn√Ω festival">Rodinn√Ω festival</option>
                                    <option value="veletrh">ƒåokol√°dov√Ω festival</option>
                                    <option value="ostatn√≠">Ostatn√≠</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="eventName">N√°zev akce</label>
                                <input type="text" id="eventName" placeholder="Zaƒçnƒõte ps√°t pro zobrazen√≠ na≈°ept√°vaƒçe z historick√Ωch akc√≠" 
                                       oninput="showEventSuggestions(this.value)" onchange="updatePrediction()">
                                <div id="eventSuggestions" class="suggestions"></div>
                            </div>

                            <div class="form-group">
                                <label for="eventCity">Mƒõsto/Lokalita</label>
                                <input type="text" id="eventCity" placeholder="Automatick√© na≈°ept√°v√°n√≠ mƒõst" 
                                       oninput="showCitySuggestions(this.value)" onchange="updateWeatherAndPrediction()">
                                <div id="citySuggestions" class="suggestions"></div>
                            </div>

                            <div class="form-group">
                                <label for="eventDate">Datum zaƒç√°tku akce</label>
                                <input type="date" id="eventDate" onchange="updateWeatherAndPrediction()">
                            </div>

                            <div class="form-group">
                                <label for="eventDuration">D√©lka akce (dny)</label>
                                <select id="eventDuration" onchange="updatePrediction()">
                                    <option value="1">1 den</option>
                                    <option value="2">2 dny</option>
                                    <option value="3">3 dny</option>
                                    <option value="4">4 dny</option>
                                    <option value="5">5 dn√≠</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="expectedVisitors">Oƒçek√°van√° n√°v≈°tƒõvnost</label>
                                <input type="number" id="expectedVisitors" placeholder="Z√°kladn√≠ √∫daj pro v√Ωpoƒçet predikce" onchange="updatePrediction()">
                            </div>

                            <div class="form-group">
                                <label for="eventEnvironment">Prost≈ôed√≠ akce</label>
                                <select id="eventEnvironment" onchange="updatePrediction()">
                                    <option value="outdoor">Venkovn√≠ akce</option>
                                    <option value="indoor">Vnit≈ôn√≠ akce</option>
                                    <option value="mixed">Sm√≠≈°en√© (venku i uvnit≈ô)</option>
                                </select>
                                <small>Ovliv≈àuje d≈Øle≈æitost poƒças√≠ pro kvalitu donut≈Ø</small>
                            </div>
                        </div>
                    </div>

                    <!-- Weather Forecast -->
                    <div class="card">
                        <h3>üå§Ô∏è P≈ôedpovƒõƒè poƒças√≠ a kvalita donut≈Ø</h3>
                        <div id="weatherSection">
                            <div class="weather-placeholder">
                                <p>üìç Vyberte mƒõsto a datum pro naƒçten√≠ poƒças√≠</p>
                            </div>
                        </div>
                        <div class="weather-warning" id="weatherWarning" style="display: none;">
                            <div class="warning-content">
                                <span class="warning-icon">‚ö†Ô∏è</span>
                                <div>
                                    <strong>Varov√°n√≠ kvality:</strong>
                                    <span id="weatherWarningText">Vysok√© teploty mohou zp≈Øsobit rozt√©k√°n√≠ ƒçokol√°dov√Ωch polev!</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sales Prediction -->
                    <div class="card prediction-results">
                        <h3>üìä Predikce prodeje a rentabilita</h3>
                        <div id="predictionSection">
                            <div class="business-model-selector">
                                <label>Model podnik√°n√≠:</label>
                                <div class="model-buttons">
                                    <button class="model-btn active" onclick="selectBusinessModel('owner')" data-model="owner">
                                        üè™ Majitel <small>(vy + 2 brig√°dn√≠ci)</small>
                                    </button>
                                    <button class="model-btn" onclick="selectBusinessModel('employee')" data-model="employee">
                                        üë∑ Zamƒõstnanec <small>(vy + 1 brig√°dn√≠k)</small>
                                    </button>
                                    <button class="model-btn" onclick="selectBusinessModel('franchise')" data-model="franchise">
                                        ü§ù Fran≈°√≠zant
                                    </button>
                                </div>
                                <div class="model-info">
                                    <small id="modelInfo">Majitel: 2 brig√°dn√≠ci (150 Kƒç/h √ó 10h = 3000 Kƒç) + v≈°echny n√°klady</small>
                                </div>
                            </div>

                            <div class="cost-inputs">
                                <div class="input-row">
                                    <div class="input-group">
                                        <label>N√°klady na donut (Kƒç):</label>
                                        <input type="number" id="donutCost" value="8" step="0.1" onchange="updatePrediction()">
                                    </div>
                                    <div class="input-group">
                                        <label>Prodejn√≠ cena (Kƒç):</label>
                                        <input type="number" id="donutPrice" value="45" step="1" onchange="updatePrediction()">
                                    </div>
                                </div>
                                <div class="input-row">
                                    <div class="input-group">
                                        <label>N√°klady na dopravu (Kƒç):</label>
                                        <input type="number" id="transportCost" value="500" step="50" onchange="updatePrediction()">
                                    </div>
                                    <div class="input-group">
                                        <label>Ostatn√≠ n√°klady (Kƒç):</label>
                                        <input type="number" id="otherCosts" value="0" step="50" onchange="updatePrediction()">
                                    </div>
                                </div>
                            </div>

                            <div class="rent-model">
                                <label>Model n√°jmu:</label>
                                <select id="rentModel" onchange="toggleRentInputs(); updatePrediction();">
                                    <option value="fixed">Fixn√≠ n√°jem</option>
                                    <option value="percentage">% z obratu</option>
                                    <option value="mixed">Fix + % z obratu</option>
                                </select>
                                
                                <div class="rent-inputs">
                                    <div id="fixedRentGroup" class="input-group">
                                        <label>Fixn√≠ n√°jem (Kƒç):</label>
                                        <input type="number" id="fixedRent" value="2500" step="100" onchange="updatePrediction()">
                                    </div>
                                    <div id="percentageRentGroup" class="input-group" style="display: none;">
                                        <label>% z obratu:</label>
                                        <input type="number" id="percentageRent" value="15" step="0.5" min="0" max="100" onchange="updatePrediction()">
                                    </div>
                                    <div id="mixedFixedGroup" class="input-group" style="display: none;">
                                        <label>Fixn√≠ ƒç√°st (Kƒç):</label>
                                        <input type="number" id="mixedFixed" value="1000" step="100" onchange="updatePrediction()">
                                    </div>
                                    <div id="mixedPercentageGroup" class="input-group" style="display: none;">
                                        <label>% ƒç√°st z obratu:</label>
                                        <input type="number" id="mixedPercentage" value="10" step="0.5" min="0" max="100" onchange="updatePrediction()">
                                    </div>
                                </div>
                            </div>

                            <div class="prediction-placeholder" id="predictionPlaceholder">
                                <p>üìç Vypl≈àte typ akce a n√°v≈°tƒõvnost pro naƒçten√≠ predikce</p>
                            </div>

                            <div class="prediction-display" id="predictionDisplay" style="display: none;">
                                <div class="prediction-metrics">
                                    <div class="metric">
                                        <div class="metric-value" id="predictedSales">0</div>
                                        <div class="metric-label">Predikovan√Ω prodej (ks)</div>
                                    </div>
                                    <div class="metric">
                                        <div class="metric-value" id="expectedRevenue">0 Kƒç</div>
                                        <div class="metric-label">Oƒçek√°van√Ω obrat</div>
                                    </div>
                                    <div class="metric">
                                        <div class="metric-value" id="totalCosts">0 Kƒç</div>
                                        <div class="metric-label">Celkov√© n√°klady</div>
                                    </div>
                                    <div class="metric">
                                        <div class="metric-value" id="expectedProfit">0 Kƒç</div>
                                        <div class="metric-label">Oƒçek√°van√Ω zisk</div>
                                    </div>
                                </div>
                                <div class="confidence-indicator">
                                    <span>Spolehlivost predikce: </span>
                                    <span class="confidence-value" id="confidenceValue">85%</span>
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" id="confidenceFill" style="width: 85%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Calendar Section -->
            <section id="calendar" class="section">
                <div class="section-header">
                    <h2>üìÖ Kalend√°≈ô akc√≠</h2>
                    <p>P≈ôehled pl√°novan√Ωch a dokonƒçen√Ωch akc√≠</p>
                </div>
                <div class="calendar-container">
                    <div class="calendar-header">
                        <button class="btn-secondary" onclick="previousMonth()">‚óÄ</button>
                        <h3 id="currentMonth">ƒåerven 2025</h3>
                        <button class="btn-secondary" onclick="nextMonth()">‚ñ∂</button>
                    </div>
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Calendar will be generated by JavaScript -->
                    </div>
                    <div class="calendar-legend">
                        <div class="legend-item">
                            <span class="legend-color confirmed"></span>
                            <span>Potvrzeno</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color pending"></span>
                            <span>ƒåek√° na potvrzen√≠</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color completed"></span>
                            <span>Dokonƒçeno</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="section">
                <div class="section-header">
                    <h2>üìä Anal√Ωza prodejn√≠ch dat</h2>
                    <p>Detailn√≠ anal√Ωza v√Ωkonnosti a trend≈Ø</p>
                </div>
                <div class="analytics-container">
                    <div class="analytics-loading">
                        <p>Naƒç√≠t√°m analytick√° data...</p>
                    </div>
                    <div class="analytics-content" style="display: none;">
                        <div class="charts-grid">
                            <div class="chart-container">
                                <h4>Prodeje podle typu akce</h4>
                                <canvas id="salesByTypeChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <h4>Mƒõs√≠ƒçn√≠ trendy</h4>
                                <canvas id="monthlyTrendsChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <h4>Rentabilita podle lokality</h4>
                                <canvas id="profitabilityChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <h4>Vliv poƒças√≠ na prodeje</h4>
                                <canvas id="weatherImpactChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="section">
                <div class="section-header">
                    <h2>‚öôÔ∏è Nastaven√≠ aplikace</h2>
                    <p>Konfigurace syst√©mu a v√Ωchoz√≠ch hodnot</p>
                </div>
                <div class="settings-container">
                    <div class="settings-card">
                        <h3>üìä Cenov√© nastaven√≠</h3>
                        <div class="settings-group">
                            <div class="setting-item">
                                <label for="defaultPrice">V√Ωchoz√≠ cena donutu (Kƒç)</label>
                                <input type="number" id="defaultPrice" value="45" step="1">
                                <small>Pr≈Ømƒõrn√° prodejn√≠ cena na akc√≠ch</small>
                            </div>
                            <div class="setting-item">
                                <label for="defaultCost">N√°klady na v√Ωrobu donutu (Kƒç)</label>
                                <input type="number" id="defaultCost" value="8" step="0.1">
                                <small>N√°klady na n√°kup od pek√°rny</small>
                            </div>
                            <div class="setting-item">
                                <label for="franchisePrice">Prodejn√≠ cena pro fran≈°√≠zanty (Kƒç)</label>
                                <input type="number" id="franchisePrice" value="25" step="1">
                                <small>Cena za kterou prod√°v√°te donuty fran≈°√≠zant≈Øm</small>
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h3>üîß API Nastaven√≠</h3>
                        <div class="settings-group">
                            <div class="setting-item">
                                <label for="weatherApiKey">Weather API Key</label>
                                <input type="password" id="weatherApiKey" value="c2fb0e86623880dc86162892b0fd9c95">
                                <small>API kl√≠ƒç pro OpenWeatherMap</small>
                            </div>
                            <div class="setting-item">
                                <label for="mapsApiKey">Google Maps API Key</label>
                                <input type="password" id="mapsApiKey" value="AIzaSyBTTA_MKa6FrxKpkcd7c5-d3FnC6FBLVTc">
                                <small>API kl√≠ƒç pro Google Maps a geocoding</small>
                            </div>
                            <div class="setting-item">
                                <label for="sheetsUrl">Google Sheets URL</label>
                                <input type="url" id="sheetsUrl" value="https://docs.google.com/spreadsheets/d/1LclCz9hb0hlb1D92OyVqk6Cbam7PRK6KgAzGgiGs6iE/edit?usp=sharing">
                                <small>URL k Google Sheets s daty akc√≠</small>
                            </div>
                        </div>
                    </div>

                    <div class="settings-actions">
                        <button class="btn-primary" onclick="saveSettings()">üíæ Ulo≈æit nastaven√≠</button>
                        <button class="btn-secondary" onclick="resetSettings()">üîÑ Obnovit v√Ωchoz√≠</button>
                        <button class="btn-secondary" onclick="exportData()">üìÅ Exportovat data</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
