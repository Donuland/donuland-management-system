<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç© Donuland Management System v3.0</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üç©</text></svg>">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="donut">üç©</div>
            <h1>Donuland Management System v3.0</h1>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p>Inicializuji...</p>
        </div>
    </div>

    <!-- Main Application -->
    <div class="container" id="mainApp" style="display: none;">
        <header>
            <div class="header-content">
                <h1>üç© Donuland Management System v3.0</h1>
                <div class="header-controls">
                    <button class="btn-primary" onclick="loadData()">üîÑ Naƒç√≠st data</button>
                    <div class="status-indicator" id="statusIndicator">
                        <span class="status-dot"></span>
                        <span>Online</span>
                    </div>
                </div>
            </div>
        </header>

        <nav class="sidebar">
            <div class="nav-item active" onclick="showSection('prediction')">
                <span class="nav-icon">ü§ñ</span>
                <span>AI Predikce</span>
            </div>
            <div class="nav-item" onclick="showSection('calendar')">
                <span class="nav-icon">üìÖ</span>
                <span>Kalend√°≈ô akc√≠</span>
            </div>
            <div class="nav-item" onclick="showSection('analytics')">
                <span class="nav-icon">üìä</span>
                <span>Anal√Ωza & Trendy</span>
            </div>
            <div class="nav-item" onclick="showSection('settings')">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span>Nastaven√≠</span>
            </div>
        </nav>

        <main class="main-content">
            <!-- AI Predikce Section -->
            <section id="prediction" class="section active">
                <div class="section-header">
                    <h2>ü§ñ AI Predikce prodeje a rentabilita</h2>
                    <p>Inteligentn√≠ predikce zalo≈æen√° na historick√Ωch datech, poƒças√≠ a typu akce</p>
                </div>

                <div class="prediction-grid">
                    <!-- Event Details -->
                    <div class="card">
                        <h3>üéØ Z√°kladn√≠ informace akce</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="eventType">Typ akce</label>
                                <select id="eventType" onchange="updatePrediction()">
                                    <option value="">Vyberte typ akce</option>
                                    <option value="food-festival">Food festival</option>
                                    <option value="fair">Veletrh</option>
                                    <option value="concert">Koncert/Hudebn√≠ festival</option>
                                    <option value="sports">Sportovn√≠ akce</option>
                                    <option value="cultural">Kulturn√≠/Rodinn√° akce</option>
                                    <option value="family">Rodinn√Ω festival</option>
                                    <option value="chocolate">ƒåokol√°dov√Ω festival</option>
                                    <option value="other">Ostatn√≠</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="eventName">N√°zev akce</label>
                                <input type="text" id="eventName" placeholder="Zaƒçnƒõte ps√°t pro zobrazen√≠ na≈°ept√°vaƒçe z historick√Ωch akc√≠" 
                                       oninput="showEventSuggestions(this.value)" onchange="updatePrediction()">
                                <div id="eventSuggestions" class="suggestions"></div>
                            </div>

                            <div class="form-group">
                                <label for="location">Mƒõsto/Lokalita</label>
                                <input type="text" id="location" placeholder="Automatick√© na≈°ept√°v√°n√≠ mƒõst" 
                                       oninput="showCitySuggestions(this.value)" onchange="updateWeatherAndPrediction()">
                                <div id="citySuggestions" class="suggestions"></div>
                            </div>

                            <div class="form-group">
                                <label for="eventStartDate">Datum zaƒç√°tku akce</label>
                                <input type="date" id="eventStartDate" onchange="updateWeatherAndPrediction()">
                            </div>

                            <div class="form-group">
                                <label for="eventDuration">D√©lka akce (dny)</label>
                                <select id="eventDuration" onchange="updatePrediction()">
                                    <option value="1">1 den</option>
                                    <option value="2">2 dny</option>
                                    <option value="3">3 dny</option>
                                    <option value="4">4 dny</option>
                                    <option value="5">5 dn√≠</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="expectedAttendees">Oƒçek√°van√° n√°v≈°tƒõvnost</label>
                                <input type="number" id="expectedAttendees" placeholder="Z√°kladn√≠ √∫daj pro v√Ωpoƒçet predikce" onchange="updatePrediction()">
                            </div>

                            <div class="form-group">
                                <label for="eventEnvironment">Prost≈ôed√≠ akce</label>
                                <select id="eventEnvironment" onchange="updatePrediction()">
                                    <option value="">Vyberte prost≈ôed√≠</option>
                                    <option value="outdoor">Venkovn√≠ akce</option>
                                    <option value="indoor">Vnit≈ôn√≠ akce</option>
                                    <option value="mixed">Sm√≠≈°en√© (venku i uvnit≈ô)</option>
                                </select>
                                <small>Ovliv≈àuje d≈Øle≈æitost poƒças√≠ pro kvalitu donut≈Ø</small>
                            </div>
                        </div>
                    </div>

                    <!-- Weather Section -->
                    <div class="card">
                        <h3>üå§Ô∏è P≈ôedpovƒõƒè poƒças√≠ a kvalita donut≈Ø</h3>
                        <div id="weatherForecast" class="weather-display">
                            <p>üìç Vyberte mƒõsto a datum pro naƒçten√≠ poƒças√≠</p>
                        </div>
                        <div id="qualityWarning" class="quality-warning">
                            <p>‚ö†Ô∏è <strong>Varov√°n√≠ kvality:</strong></p>
                            <p>Vysok√© teploty mohou zp≈Øsobit rozt√©k√°n√≠ ƒçokol√°dov√Ωch polev!</p>
                        </div>
                        <div id="weatherImportance" class="weather-importance"></div>
                    </div>

                    <!-- Business Model Section -->
                    <div class="card">
                        <h3>üìä Predikce prodeje a rentabilita</h3>
                        
                        <div class="form-group">
                            <label for="businessModel">Model podnik√°n√≠:</label>
                            <select id="businessModel" onchange="updateBusinessModelInfo()">
                                <option value="">Vyberte model</option>
                                <option value="owner">üè™ Majitel (vy + 2 brig√°dn√≠ci)</option>
                                <option value="employee">üë∑ Zamƒõstnanec (vy + 1 brig√°dn√≠k)</option>
                                <option value="franchise">ü§ù Fran≈°√≠zant</option>
                            </select>
                            <div id="businessModelInfo" class="model-description" style="display: none;">
                                
                            </div>
                        </div>

                        <div class="cost-inputs">
                            <div class="form-group">
                                <label for="donutCost">N√°klady na donut (Kƒç):</label>
                                <input type="number" id="donutCost" value="25" step="0.1" onchange="updatePrediction()">
                            </div>
                            <div class="form-group">
                                <label for="donutPrice">Prodejn√≠ cena (Kƒç):</label>
                                <input type="number" id="donutPrice" value="50" step="0.1" onchange="updatePrediction()">
                            </div>
                            <div class="form-group">
                                <label for="transportCost">N√°klady na dopravu (Kƒç):</label>
                                <input type="number" id="transportCost" value="500" onchange="updatePrediction()">
                            </div>
                            <div class="form-group">
                                <label for="otherCosts">Ostatn√≠ n√°klady (Kƒç):</label>
                                <input type="number" id="otherCosts" value="1000" onchange="updatePrediction()">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="rentModel">Model n√°jmu:</label>
                            <select id="rentModel" onchange="updateRentModel()">
                                <option value="">Vyberte model n√°jmu</option>
                                <option value="fixed">Fixn√≠ n√°jem</option>
                                <option value="percentage">% z obratu</option>
                                <option value="mixed">Fix + % z obratu</option>
                            </select>
                        </div>

                        <div id="fixedRentGroup" class="rent-group" style="display: none;">
                            <div class="form-group">
                                <label for="fixedRent">Fixn√≠ n√°jem (Kƒç):</label>
                                <input type="number" id="fixedRent" class="form-control" onchange="updatePrediction()">
                            </div>
                        </div>

                        <div id="percentageRentGroup" class="rent-group" style="display: none;">
                            <div class="form-group">
                                <label for="percentageRent">% z obratu:</label>
                                <input type="number" id="percentageRent" class="form-control" min="0" max="100" step="0.1" onchange="updatePrediction()">
                            </div>
                        </div>

                        <div id="fixedPercentageGroup" class="rent-group" style="display: none;">
                            <div class="form-group">
                                <label for="fixedPart">Fixn√≠ ƒç√°st (Kƒç):</label>
                                <input type="number" id="fixedPart" class="form-control" onchange="updatePrediction()">
                            </div>
                            <div class="form-group">
                                <label for="percentagePart">% ƒç√°st z obratu:</label>
                                <input type="number" id="percentagePart" class="form-control" min="0" max="100" step="0.1" onchange="updatePrediction()">
                            </div>
                        </div>

                        <div id="predictionDisplay" class="prediction-display">
                            üìç Vypl≈àte typ akce a n√°v≈°tƒõvnost pro naƒçten√≠ predikce
                        </div>
                    </div>
                </div>
            </section>

            <!-- Calendar Section -->
            <section id="calendar" class="section">
                <div class="section-header">
                    <h2>üìÖ Kalend√°≈ô akc√≠</h2>
                    <p>P≈ôehled pl√°novan√Ωch a dokonƒçen√Ωch akc√≠</p>
                </div>
                <div id="calendarDisplay" class="calendar-display">
                    <p>Kalend√°≈ô se naƒç√≠t√°...</p>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="section">
                <div class="section-header">
                    <h2>üìä Anal√Ωza prodejn√≠ch dat</h2>
                    <p>Detailn√≠ anal√Ωza v√Ωkonnosti a trend≈Ø</p>
                </div>
                <div id="analysisDisplay" class="analysis-display">
                    <p>Naƒç√≠t√°m analytick√° data...</p>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="section">
                <div class="section-header">
                    <h2>‚öôÔ∏è Nastaven√≠ aplikace</h2>
                    <p>Konfigurace syst√©mu a v√Ωchoz√≠ch hodnot</p>
                </div>
                
                <form id="settingsForm" class="settings-form">
                    <div class="card">
                        <h3>üí∞ Cenov√© nastaven√≠</h3>
                        <div class="form-group">
                            <label for="defaultDonutPrice">V√Ωchoz√≠ cena donutu (Kƒç)</label>
                            <input type="number" id="defaultDonutPrice" value="50" step="0.1">
                            <small>Pr≈Ømƒõrn√° prodejn√≠ cena na akc√≠ch</small>
                        </div>

                        <div class="form-group">
                            <label for="defaultDonutCost">N√°klady na v√Ωrobu donutu (Kƒç)</label>
                            <input type="number" id="defaultDonutCost" value="25" step="0.1">
                            <small>N√°klady na n√°kup od pek√°rny</small>
                        </div>

                        <div class="form-group">
                            <label for="franchiseDonutPrice">Prodejn√≠ cena pro fran≈°√≠zanty (Kƒç)</label>
                            <input type="number" id="franchiseDonutPrice" value="35" step="0.1">
                            <small>Cena za kterou prod√°v√°te donuty fran≈°√≠zant≈Øm</small>
                        </div>
                    </div>

                    <div class="card">
                        <h3>üîß API nastaven√≠</h3>
                        <div class="form-group">
                            <label for="weatherApiKey">Weather API Key</label>
                            <input type="password" id="weatherApiKey" placeholder="Zadejte OpenWeatherMap API kl√≠ƒç">
                            <small>API kl√≠ƒç pro p≈ôedpovƒõƒè poƒças√≠</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="googleSheetsUrl">Google Sheets URL</label>
                            <input type="url" id="googleSheetsUrl" placeholder="https://docs.google.com/spreadsheets/d/...">
                            <small>URL k va≈°emu Google Sheets s daty</small>
                        </div>
                    </div>

                    <button type="button" id="saveSettings" class="btn btn-primary">üíæ Ulo≈æit nastaven√≠</button>
                </form>
            </section>
        </main>
    </div>

    <!-- üö® KRITICK√â: Naƒçten√≠ v≈°ech JS modul≈Ø ve spr√°vn√©m po≈ôad√≠ -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/dataManager.js"></script>
    <script src="js/weather.js"></script>
    <script src="js/autocomplete.js"></script>
    <script src="js/businessModel.js"></script>
    <script src="js/prediction.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/activator.js"></script>
    <script src="js/app.js"></script> <!-- Hlavn√≠ koordin√°tor jako posledn√≠ -->
</body>
</html>
