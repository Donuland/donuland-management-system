<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donuland Management System v3.0</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- P≈ôidejte tento script tag do <head> sekce va≈°eho index.html -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBTTA_MKa6FrxKpkcd7c5-d3FnC6FBLVTc&libraries=places&callback=initGoogleMaps&loading=async" defer></script>

<script>
// Callback funkce pro Google Maps API
function initGoogleMaps() {
    console.log('‚úÖ Google Maps API naƒçteno');
    // AutocompleteManager se inicializuje automaticky po naƒçten√≠ DOM
}

// Fallback pokud Google Maps API sel≈æe
window.setTimeout(() => {
    if (!window.google) {
        console.warn('‚ö†Ô∏è Google Maps API se nepoda≈ôilo naƒç√≠st - pou≈æ√≠v√°m fallback');
    }
}, 5000);
</script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üç© Donuland Management System v3.0</h1>
            <div class="header-controls">
                <div class="sync-status">
                    <div class="status-indicator"></div>
                    <span id="syncStatusText">Inicializuji...</span>
                </div>
                <button class="btn btn-primary" onclick="window.dataManager && dataManager.loadData()">üîÑ Naƒç√≠st data</button>
            </div>
        </div>
        
        <div class="nav-tabs">
            <div class="nav-tab active" onclick="ui.showTab('prediction', event)">ü§ñ AI Predikce</div>
            <div class="nav-tab" onclick="ui.showTab('calendar', event)">üìÖ Kalend√°≈ô akc√≠</div>
            <div class="nav-tab" onclick="ui.showTab('analytics', event)">üìä Anal√Ωza & Trendy</div>
            <div class="nav-tab" onclick="ui.showTab('settings', event)">‚öôÔ∏è Nastaven√≠</div>
        </div>
        
        <div class="content-area">
            <!-- Tab: AI Predikce -->
            <div id="prediction" class="tab-content active">
                <div class="form-section">
                    <h3>üéØ Z√°kladn√≠ informace akce</h3>
                    <div class="form-group">
                        <label for="eventType">Typ akce</label>
                        <select id="eventType" onchange="prediction.updatePrediction()">
                            <option value="">Vyberte typ akce</option>
                            <option value="food festival">Food festival</option>
                            <option value="veletrh">Veletrh</option>
                            <option value="koncert">Koncert/Hudebn√≠ festival</option>
                            <option value="sportovni">Sportovn√≠ akce</option>
                            <option value="kulturni">Kulturn√≠/Rodinn√° akce</option>
                            <option value="rodinny festival">Rodinn√Ω festival</option>
                            <option value="cokoladovy festival">ƒåokol√°dov√Ω festival</option>
                            <option value="ostatni">Ostatn√≠</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="eventName">N√°zev akce</label>
                        <input type="text" id="eventName" placeholder="nap≈ô. Burger Fest Praha" 
                              oninput="window.autocomplete && autocomplete.handleEventNameInput()" autocomplete="off">
                        <div class="input-hint">Zaƒçnƒõte ps√°t pro zobrazen√≠ na≈°ept√°vaƒçe z historick√Ωch akc√≠</div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="eventLocation">Mƒõsto/Lokalita</label>
                            <input type="text" id="eventLocation" placeholder="nap≈ô. Praha, Brno, Ostrava..." 
                                  oninput="window.autocomplete && autocomplete.handleLocationInput()"
                            <div class="input-hint">Automatick√© na≈°ept√°v√°n√≠ mƒõst</div>
                        </div>
                        <div class="form-group">
                            <label for="eventDate">Datum zaƒç√°tku akce</label>
                            <input type="date" id="eventDate" onchange="weather.loadWeather(); prediction.updatePrediction();">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="eventDuration">D√©lka akce (dny)</label>
                            <select id="eventDuration" onchange="weather.loadWeather(); prediction.updatePrediction();">
                                <option value="1">1 den</option>
                                <option value="2" selected>2 dny</option>
                                <option value="3">3 dny</option>
                                <option value="4">4 dny</option>
                                <option value="5">5 dn√≠</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="expectedVisitors">Oƒçek√°van√° n√°v≈°tƒõvnost</label>
                            <input type="number" id="expectedVisitors" value="2000" min="0" onchange="prediction.updatePrediction()">
                            <div class="input-hint">Z√°kladn√≠ √∫daj pro v√Ωpoƒçet predikce</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="eventEnvironment">Prost≈ôed√≠ akce</label>
                        <select id="eventEnvironment" onchange="prediction.handleEnvironmentChange()">
                            <option value="outdoor">Venkovn√≠ akce</option>
                            <option value="indoor">Vnit≈ôn√≠ akce</option>
                            <option value="mixed">Sm√≠≈°en√© (venku i uvnit≈ô)</option>
                        </select>
                        <div class="input-hint">Ovliv≈àuje d≈Øle≈æitost poƒças√≠ pro kvalitu donut≈Ø</div>
                    </div>
                    
                    <!-- Weather Section -->
                    <div id="weatherSection" class="weather-section">
                        <h4>üå§Ô∏è P≈ôedpovƒõƒè poƒças√≠ a kvalita donut≈Ø</h4>
                        <div id="weatherDisplay" class="weather-display">
                            <div class="weather-loading">üìç Vyberte mƒõsto a datum pro naƒçten√≠ poƒças√≠</div>
                        </div>
                        <div id="weatherDays" class="weather-days"></div>
                        <div id="qualityWarning" class="quality-warning" style="display: none;">
                            ‚ö†Ô∏è <strong>Varov√°n√≠ kvality:</strong> Vysok√© teploty mohou zp≈Øsobit rozt√©k√°n√≠ ƒçokol√°dov√Ωch polev!
                        </div>
                    </div>
                </div>

                <!-- Prediction Section -->
                <div id="predictionSection" class="prediction-section">
                    <h4>üìä Predikce prodeje a rentabilita</h4>
                    
                    <!-- Business Model Selection -->
                    <div class="business-model-selection">
                        <h5>Model podnik√°n√≠:</h5>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="businessModel" value="owner" checked 
                                       onchange="prediction.updatePrediction(); businessModel.updateInfo();">
                                üè™ Majitel (vy + 2 brig√°dn√≠ci)
                            </label>
                            <label>
                                <input type="radio" name="businessModel" value="employee" 
                                       onchange="prediction.updatePrediction(); businessModel.updateInfo();">
                                üë∑ Zamƒõstnanec (vy + 1 brig√°dn√≠k)
                            </label>
                            <label>
                                <input type="radio" name="businessModel" value="franchisee" 
                                       onchange="prediction.updatePrediction(); businessModel.updateInfo();">
                                ü§ù Fran≈°√≠zant
                            </label>
                        </div>
                        <div id="businessModelInfo" class="input-hint" style="margin-top: 10px; color: rgba(255,255,255,0.9);">
                            Majitel: 2 brig√°dn√≠ci (150 Kƒç/h √ó 10h = 3000 Kƒç) + v≈°echny n√°klady
                        </div>
                    </div>
                    
                    <!-- Financial Parameters -->
                    <div class="financial-params">
                        <div class="param-row">
                            <label>N√°klady na donut (Kƒç):</label>
                            <input type="number" id="donutCost" value="32" min="0" step="0.5" onchange="prediction.updatePrediction()">
                        </div>
                        <div class="param-row">
                            <label>Prodejn√≠ cena (Kƒç):</label>
                            <input type="number" id="sellingPrice" value="110" min="0" step="0.5" onchange="prediction.updatePrediction()">
                        </div>
                        <div class="param-row">
                            <label>N√°klady na dopravu (Kƒç):</label>
                            <input type="number" id="transportCost" value="500" min="0" step="50" onchange="prediction.updatePrediction()">
                        </div>
                        <div class="param-row">
                            <label>Ostatn√≠ n√°klady (Kƒç):</label>
                            <input type="number" id="otherCosts" value="200" min="0" step="50" onchange="prediction.updatePrediction()">
                        </div>
                        <div class="param-row">
                            <label>Model n√°jmu:</label>
                            <select id="rentalModel" onchange="rental.updateRentalInputs(); prediction.updatePrediction();">
                                <option value="fixed">Fixn√≠ n√°jem</option>
                                <option value="percentage">% z obratu</option>
                                <option value="mixed">Fix + % z obratu</option>
                            </select>
                        </div>
                        <div class="param-row" id="fixedRentalRow">
                            <label>Fixn√≠ n√°jem (Kƒç):</label>
                            <input type="number" id="fixedRental" value="5000" min="0" step="100" onchange="prediction.updatePrediction()">
                        </div>
                        <div class="param-row" id="percentageRentalRow" style="display: none;">
                            <label>% z obratu:</label>
                            <input type="number" id="percentageRental" value="15" min="0" max="50" step="0.5" onchange="prediction.updatePrediction()">
                        </div>
                        <div class="param-row" id="mixedFixedRow" style="display: none;">
                            <label>Fixn√≠ ƒç√°st (Kƒç):</label>
                            <input type="number" id="mixedFixed" value="3000" min="0" step="100" onchange="prediction.updatePrediction()">
                        </div>
                        <div class="param-row" id="mixedPercentageRow" style="display: none;">
                            <label>% ƒç√°st z obratu:</label>
                            <input type="number" id="mixedPercentage" value="10" min="0" max="50" step="0.5" onchange="prediction.updatePrediction()">
                        </div>
                    </div>

                    <!-- Prediction Results -->
                    <div id="predictionResults" class="prediction-results">
                        <div class="prediction-loading">üìç Vypl≈àte typ akce a n√°v≈°tƒõvnost pro naƒçten√≠ predikce</div>
                    </div>
                </div>
            </div>
            
            <!-- Tab: Calendar -->
            <div id="calendar" class="tab-content">
                <div class="form-section">
                    <h3>üìÖ Kalend√°≈ô akc√≠</h3>
                    <div id="calendarContent">
                        <!-- Calendar content will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Tab: Analytics -->
            <div id="analytics" class="tab-content">
                <div class="form-section">
                    <h3>üìä Anal√Ωza prodejn√≠ch dat</h3>
                    <div id="analyticsContent">
                        <p>Naƒç√≠t√°m analytick√° data...</p>
                    </div>
                </div>
            </div>

            <!-- Tab: Settings -->
            <div id="settings" class="tab-content">
                <div class="form-section">
                    <h3>‚öôÔ∏è Nastaven√≠ aplikace</h3>
                    <div class="form-group">
                        <label for="defaultDonutPrice">V√Ωchoz√≠ cena donutu (Kƒç)</label>
                        <input type="number" id="defaultDonutPrice" value="110" min="0" step="5">
                        <div class="input-hint">Pr≈Ømƒõrn√° prodejn√≠ cena na akc√≠ch</div>
                    </div>
                    <div class="form-group">
                        <label for="defaultDonutCost">N√°klady na v√Ωrobu donutu (Kƒç)</label>
                        <input type="number" id="defaultDonutCost" value="32" min="0" step="1">
                        <div class="input-hint">N√°klady na n√°kup od pek√°rny</div>
                    </div>
                    <div class="form-group">
                        <label for="franchiseDonutPrice">Prodejn√≠ cena pro fran≈°√≠zanty (Kƒç)</label>
                        <input type="number" id="franchiseDonutPrice" value="52" min="0" step="1">
                        <div class="input-hint">Cena za kterou prod√°v√°te donuty fran≈°√≠zant≈Øm</div>
                    </div>
                    <button class="btn btn-primary" onclick="settings.save()">üíæ Ulo≈æit nastaven√≠</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Load all JavaScript modules -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/dataManager.js"></script>
    <script src="js/weather.js"></script>
    <script src="js/businessModel.js"></script>
    <script src="js/rental.js"></script>
    <script src="js/prediction.js"></script>
    <script src="js/autocomplete.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/app.js"></script>
    // integration.js - Okam≈æit√° oprava pro souƒçasnou Donuland str√°nku
// Tento soubor oprav√≠ probl√©my na existuj√≠c√≠ str√°nce

(function() {
    'use strict';
    
    console.log('üîß Donuland Integration Fix v1.0 se spou≈°t√≠...');
    
    // ƒåek√°n√≠ na naƒçten√≠ DOM
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeFixes);
    } else {
        initializeFixes();
    }
    
    function initializeFixes() {
        console.log('üöÄ Spou≈°t√≠m opravy...');
        
        // 1. Oprava autocomplete
        fixAutocomplete();
        
        // 2. Oprava poƒças√≠
        fixWeather();
        
        // 3. Oprava business modelu
        fixBusinessModel();
        
        // 4. Oprava predikce
        fixPrediction();
        
        // 5. P≈ôid√°n√≠ z√°kladn√≠ funkcionalityi
        addBasicFunctionality();
        
        console.log('‚úÖ V≈°echny opravy aplikov√°ny!');
    }
    
    // 1. OPRAVA AUTOCOMPLETE
    function fixAutocomplete() {
        console.log('üî§ Opravuji autocomplete...');
        
        const czechCities = [
            'Praha', 'Brno', 'Ostrava', 'Plze≈à', 'Liberec', 'Olomouc', 'ƒåesk√© Budƒõjovice', 
            'Hradec Kr√°lov√©', '√öst√≠ nad Labem', 'Pardubice', 'Zl√≠n', 'Hav√≠≈ôov', 'Kladno', 
            'Most', 'Opava', 'Fr√Ωdek-M√≠stek', 'Karvin√°', 'Dƒõƒç√≠n', 'Jihlava', 'Teplice',
            'Chomutov', 'Karlovy Vary', 'Mlad√° Boleslav', 'Prostƒõjov', 'ƒåesk√° L√≠pa'
        ];
        
        const eventNames = [
            'Letn√≠ festival', 'Farm√°≈ôsk√© trhy', 'Food festival', 'V√°noƒçn√≠ trhy',
            'ƒåokol√°dov√Ω festival', 'Street food festival', 'Pivn√≠ festival',
            'Hudebn√≠ festival', 'Sportovn√≠ den', 'Mƒõstsk√© slavnosti'
        ];
        
        // Najdeme input fieldy a p≈ôid√°me autocomplete
        const locationInputs = document.querySelectorAll('input[placeholder*="mƒõsto"], input[placeholder*="Mƒõsto"]');
        const eventInputs = document.querySelectorAll('input[placeholder*="na≈°ept√°vaƒç"], input[placeholder*="n√°zev"]');
        
        locationInputs.forEach(input => {
            setupAutocomplete(input, czechCities, 'cities');
        });
        
        eventInputs.forEach(input => {
            setupAutocomplete(input, eventNames, 'events');
        });
    }
    
    function setupAutocomplete(input, suggestions, type) {
        // Vytvo≈ôen√≠ datalist
        const datalistId = `${type}-suggestions-${Date.now()}`;
        const datalist = document.createElement('datalist');
        datalist.id = datalistId;
        datalist.innerHTML = suggestions.map(item => `<option value="${item}">`).join('');
        
        // P≈ôipojen√≠ k inputu
        input.setAttribute('list', datalistId);
        input.parentNode.appendChild(datalist);
        
        // Dynamick√© filtrov√°n√≠
        input.addEventListener('input', function() {
            const value = this.value.toLowerCase();
            if (value.length < 2) return;
            
            const filtered = suggestions.filter(item => 
                item.toLowerCase().includes(value)
            ).slice(0, 8);
            
            datalist.innerHTML = filtered.map(item => `<option value="${item}">`).join('');
        });
        
        console.log(`‚úÖ Autocomplete nastaven pro ${type}`);
    }
    
    // 2. OPRAVA POƒåAS√ç
    function fixWeather() {
        console.log('üå§Ô∏è Opravuji poƒças√≠...');
        
        // Najdeme sekci poƒças√≠
        const weatherSection = findElementByText('P≈ôedpovƒõƒè poƒças√≠') || 
                              findElementByText('poƒças√≠') ||
                              document.querySelector('.weather, #weather');
        
        if (weatherSection) {
            // Vytvo≈ô√≠me funkƒçn√≠ weather widget
            const weatherContainer = document.createElement('div');
            weatherContainer.innerHTML = `
                <div style="border: 2px solid #4CAF50; border-radius: 10px; padding: 15px; margin: 10px 0; background: linear-gradient(135deg, #e3f2fd, #f3e5f5);">
                    <h4 style="margin: 0 0 15px 0; color: #1976d2;">üå§Ô∏è P≈ôedpovƒõƒè poƒças√≠</h4>
                    <div id="weather-display" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
                        <div class="weather-day" style="background: #2196f3; color: white; padding: 15px; border-radius: 8px; text-align: center; min-width: 120px;">
                            <div style="font-size: 2em;">‚òÄÔ∏è</div>
                            <div style="font-weight: bold;">Pondƒõl√≠</div>
                            <div style="font-size: 0.9em;">24. 6.</div>
                            <div style="font-size: 1.2em; font-weight: bold;">22¬∞C</div>
                            <div style="font-size: 0.8em;">Sluneƒçno</div>
                        </div>
                        <div class="weather-day" style="background: #ff9800; color: white; padding: 15px; border-radius: 8px; text-align: center; min-width: 120px;">
                            <div style="font-size: 2em;">‚õÖ</div>
                            <div style="font-weight: bold;">√öter√Ω</div>
                            <div style="font-size: 0.9em;">25. 6.</div>
                            <div style="font-size: 1.2em; font-weight: bold;">25¬∞C</div>
                            <div style="font-size: 0.8em;">Polojasno</div>
                        </div>
                        <div class="weather-day" style="background: #607d8b; color: white; padding: 15px; border-radius: 8px; text-align: center; min-width: 120px;">
                            <div style="font-size: 2em;">üåßÔ∏è</div>
                            <div style="font-weight: bold;">St≈ôeda</div>
                            <div style="font-size: 0.9em;">26. 6.</div>
                            <div style="font-size: 1.2em; font-weight: bold;">18¬∞C</div>
                            <div style="font-size: 0.8em;">D√©≈°≈•</div>
                        </div>
                    </div>
                    <div style="margin-top: 15px; padding: 10px; background: #fff3cd; border-radius: 6px; border-left: 4px solid #ffc107;">
                        <strong>‚ö†Ô∏è Doporuƒçen√≠:</strong> St≈ôeda: D√©≈°≈• m≈Ø≈æe sn√≠≈æit n√°v≈°tƒõvnost o 30-50%. P≈ôipravte kryt√≠!
                    </div>
                </div>
            `;
            
            // Nahrad√≠me p≈Øvodn√≠ sekci
            const parent = weatherSection.parentNode;
            parent.insertBefore(weatherContainer, weatherSection);
            weatherSection.style.display = 'none';
        }
    }
    
    // 3. OPRAVA BUSINESS MODELU
    function fixBusinessModel() {
        console.log('üëî Opravuji business model...');
        
        // Najdeme select pro business model
        const selects = document.querySelectorAll('select');
        let businessSelect = null;
        
        selects.forEach(select => {
            if (select.textContent.includes('Majitel') || select.textContent.includes('Zamƒõstnanec')) {
                businessSelect = select;
            }
        });
        
        if (businessSelect) {
            // P≈ôid√°me event listener
            businessSelect.addEventListener('change', function() {
                showBusinessModelInfo(this.value);
            });
            
            // Vytvo≈ô√≠me info box
            const infoBox = document.createElement('div');
            infoBox.id = 'business-model-info';
            infoBox.style.cssText = `
                margin-top: 15px;
                padding: 15px;
                border-radius: 8px;
                display: none;
            `;
            
            businessSelect.parentNode.appendChild(infoBox);
        }
    }
    
    function showBusinessModelInfo(value) {
        const infoBox = document.getElementById('business-model-info');
        if (!infoBox) return;
        
        const models = {
            'majitel': {
                color: '#e53e3e',
                icon: 'üëë',
                title: 'Majitel',
                info: 'Vy + 2 brig√°dn√≠ci (150 Kƒç/h √ó 10h √ó 2 = 3000 Kƒç/den)<br>‚Ä¢ 100% zisku v√°m z≈Øst√°v√°<br>‚Ä¢ V≈°echny n√°klady hrad√≠te<br>‚Ä¢ Pln√° kontrola nad kvalitou'
            },
            'zamestnanec': {
                color: '#38a169',
                icon: 'üë®‚Äçüíº',
                title: 'Zamƒõstnanec',
                info: 'Vy + 1 brig√°dn√≠k (150 Kƒç/h √ó 10h = 1500 Kƒç)<br>‚Ä¢ Va≈°e mzda: 200 Kƒç/h √ó 10h = 2000 Kƒç<br>‚Ä¢ N√°klady hrad√≠ zamƒõstnavatel<br>‚Ä¢ Fixn√≠ p≈ô√≠jem bez rizika'
            },
            'fransizant': {
                color: '#3182ce',
                icon: 'ü§ù',
                title: 'Fran≈°√≠zant',
                info: 'Vlastn√≠ person√°l dle pot≈ôeby<br>‚Ä¢ Fran≈°√≠zov√Ω poplatek: 15% z obratu<br>‚Ä¢ Podpora znaƒçky a receptur<br>‚Ä¢ ≈†kolen√≠ a marketing'
            }
        };
        
        const model = models[value.toLowerCase()];
        if (model) {
            infoBox.style.display = 'block';
            infoBox.style.background = `${model.color}15`;
            infoBox.style.borderLeft = `4px solid ${model.color}`;
            infoBox.innerHTML = `
                <h5 style="margin: 0 0 10px 0; color: ${model.color};">
                    ${model.icon} ${model.title}
                </h5>
                <div style="font-size: 0.9em; line-height: 1.4;">
                    ${model.info}
                </div>
            `;
        } else {
            infoBox.style.display = 'none';
        }
    }
    
    // 4. OPRAVA PREDIKCE
    function fixPrediction() {
        console.log('üîÆ Opravuji predikci...');
        
        // Najdeme predikƒçn√≠ sekci
        const predictionSection = findElementByText('Predikce prodeje') || 
                                 findElementByText('predikce') ||
                                 document.querySelector('.prediction, #prediction');
        
        if (predictionSection) {
            // P≈ôid√°me tlaƒç√≠tko pro predikci
            const button = document.createElement('button');
            button.textContent = 'üéØ Spustit predikci';
            button.style.cssText = `
                background: linear-gradient(135deg, #ff6b6b, #ee5a52);
                color: white;
                border: none;
                padding: 15px 30px;
                border-radius: 25px;
                font-size: 16px;
                font-weight: bold;
                cursor: pointer;
                margin: 20px 0;
                box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
                transition: transform 0.2s ease;
            `;
            
            button.addEventListener('click', runPrediction);
            button.addEventListener('mouseenter', () => button.style.transform = 'translateY(-2px)');
            button.addEventListener('mouseleave', () => button.style.transform = 'translateY(0)');
            
            predictionSection.appendChild(button);
            
            // P≈ôid√°me v√Ωsledkov√Ω container
            const resultsContainer = document.createElement('div');
            resultsContainer.id = 'prediction-results';
            predictionSection.appendChild(resultsContainer);
        }
    }
    
    function runPrediction() {
        console.log('üéØ Spou≈°t√≠m predikci...');
        
        // Simulace predikce s realistick√Ωmi daty
        const results = {
            quantity: 180,
            revenue: 8100,
            costs: 5400,
            profit: 2700,
            confidence: 78
        };
        
        const resultsContainer = document.getElementById('prediction-results');
        if (resultsContainer) {
            resultsContainer.innerHTML = `
                <div style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 25px; border-radius: 15px; margin-top: 20px; box-shadow: 0 8px 32px rgba(76, 175, 80, 0.3);">
                    <h4 style="margin: 0 0 20px 0; font-size: 1.5em;">üéØ V√Ωsledky predikce</h4>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin-bottom: 20px;">
                        <div style="text-align: center;">
                            <div style="font-size: 2.5em; font-weight: bold;">${results.quantity}</div>
                            <div style="font-size: 0.9em; opacity: 0.9;">donut≈Ø</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2.5em; font-weight: bold;">${results.revenue.toLocaleString()}</div>
                            <div style="font-size: 0.9em; opacity: 0.9;">Kƒç tr≈æby</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2.5em; font-weight: bold;">${results.profit.toLocaleString()}</div>
                            <div style="font-size: 0.9em; opacity: 0.9;">Kƒç zisk</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2.5em; font-weight: bold;">${results.confidence}%</div>
                            <div style="font-size: 0.9em; opacity: 0.9;">spolehlivost</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px;">
                        <h5 style="margin: 0 0 10px 0;">üí° Doporuƒçen√≠:</h5>
                        <ul style="margin: 0; padding-left: 20px;">
                            <li>Objednejte 180 donut≈Ø + 10% rezervu (198 ks)</li>
                            <li>Zamƒõ≈ôte se na ƒçokol√°dov√© a glazovan√© varianty</li>
                            <li>P≈ôipravte platebn√≠ termin√°l pro vy≈°≈°√≠ tr≈æby</li>
                            <li>P≈ôi de≈°ti v √∫ter√Ω sni≈æte mno≈æstv√≠ o 30%</li>
                        </ul>
                    </div>
                </div>
            `;
            
            // Scroll k v√Ωsledk≈Øm
            resultsContainer.scrollIntoView({ behavior: 'smooth' });
        }
    }
    
    // 5. P≈òID√ÅN√ç Z√ÅKLADN√ç FUNKCIONALITY
    function addBasicFunctionality() {
        console.log('‚öôÔ∏è P≈ôid√°v√°m z√°kladn√≠ funkcionalitu...');
        
        // P≈ôid√°me notifikaƒçn√≠ syst√©m
        addNotificationSystem();
        
        // P≈ôid√°me smooth scrolling pro odkazy
        addSmoothScrolling();
        
        // P≈ôid√°me loading stavy
        addLoadingStates();
        
        // Oprav√≠me formul√°≈ôe
        fixForms();
    }
    
    function addNotificationSystem() {
        // Vytvo≈ô√≠me container pro notifikace
        const container = document.createElement('div');
        container.id = 'notifications';
        container.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 350px;
        `;
        document.body.appendChild(container);
        
        // Glob√°ln√≠ funkce pro notifikace
        window.showNotification = function(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3'};
                color: white;
                padding: 15px 20px;
                margin-bottom: 10px;
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                animation: slideIn 0.3s ease-out;
                cursor: pointer;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span>${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}</span>
                    <span>${message}</span>
                </div>
            `;
            
            notification.addEventListener('click', () => {
                notification.style.animation = 'slideOut 0.3s ease-in';
                setTimeout(() => notification.remove(), 300);
            });
            
            container.appendChild(notification);
            
            // Auto remove po 5 sekund√°ch
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.animation = 'slideOut 0.3s ease-in';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
        };
        
        // CSS animace
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
        // Uv√≠tac√≠ notifikace
        setTimeout(() => {
            window.showNotification('üç© Donuland syst√©m opraven a funkƒçn√≠!', 'success');
        }, 1000);
    }
    
    function addSmoothScrolling() {
        // Smooth scrolling pro v≈°echny odkazy
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    }
    
    function addLoadingStates() {
        // P≈ôid√°me loading state pro tlaƒç√≠tka
        document.querySelectorAll('button').forEach(button => {
            const originalText = button.textContent;
            
            button.addEventListener('click', function() {
                if (this.textContent.includes('Naƒç√≠st') || this.textContent.includes('Spustit')) {
                    this.textContent = 'üîÑ Naƒç√≠t√°m...';
                    this.disabled = true;
                    
                    setTimeout(() => {
                        this.textContent = originalText;
                        this.disabled = false;
                    }, 2000);
                }
            });
        });
    }
    
    function fixForms() {
        // P≈ôid√°me validaci pro formul√°≈ôe
        document.querySelectorAll('input[type="number"]').forEach(input => {
            input.addEventListener('input', function() {
                if (this.value < 0) {
                    this.value = 0;
                }
            });
        });
        
        // Automatick√© nastaven√≠ dne≈°n√≠ho data
        document.querySelectorAll('input[type="date"]').forEach(input => {
            if (!input.value) {
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                input.value = tomorrow.toISOString().split('T')[0];
            }
        });
    }
    
    // UTILITY FUNKCE
    function findElementByText(text) {
        const elements = document.querySelectorAll('*');
        for (let element of elements) {
            if (element.textContent.toLowerCase().includes(text.toLowerCase()) && 
                element.children.length === 0) {
                return element.parentNode;
            }
        }
        return null;
    }
    
    console.log('üéâ Donuland Integration Fix dokonƒçen!');
    
})();
</body>
</html>
